wforum安装说明
roy@zixia.net 

1. 首先下载最新的smth和wForum代码

wForum部分安装
2.smth安装请参考其安装文档；必须打开WWW支持
站点文件清参考site/wforum.h和site/wforum.c

3.原先安装了smth系统的站点需要升级.PASSWDS文件。请参考documents/smth_update.txt文件

4. 解压wForum。给你的站点取个名字，比方叫 mcwy。进入 wForum 目录，执行下面几个命令：
	cp inc/sites/site-example.php inc/sites/mcwy.php
	ln -s inc/sites/mcwy.php inc/site.php
inc/site.php 就是你的站点定义文件。修改 inc/site.php 里面的各类参数，特别是分类讨论区，
mysql 用户、密码和数据库名。然后按照 documents/smallpaper_tb.sql 里的定义在 mysql 中
建立一个数据表。
/*********************************************************************************/
	以后如果需要修改站点配置，可以用 SYSOP 权限的用户登录直接用浏览器请求
	admin.site_defines.php 来设置 site.php。这个功能默认是开启的！
=======>特别提醒！！如果你担心你站上别的管理员会恶意修改 site.php，请在
------->admin.site_defines.php 最开始加上
------->	die("disabled, heihei");
------->或者干脆删除该文件。
/*********************************************************************************/

5. 如果开启自定义头像功能，确认一下 wForum 主目录下面有 uploadFace/ 目录，如果没有的话就
建立一下。

6.如果是升级wForum，推荐升级之后删除~bbs/boards/目录下所有的.WEBTHREAD强制让系统
重新生成索引。可以在~bbs/boards/下执行这样一个命令：

    ls -d1 * | awk '{system(sprintf("rm %s/.WEBTHREAD", $1));}'

7. inc/reg_txt.php 是注册用户的时候看到的网站协议，可以换成站点站规。:p

8. 几个附加说明：
8a. httpd.conf 设置 wForum 所在的目录 index.php 也是 DirectoryIndex。可以在 httpd.conf 里面设置
	DirectoryIndex index.html index.html.var index.php
8b. php.ini 要关掉自动给引号加前导反斜杠
	magic_quotes_gpc = off
8c. 要保证 wForum 下的未读记录正常工作，你的 site.h 必须设置
	#define USE_TMPFS           1   /*使用内存文件系统加速*/
	#define TMPFSROOT   "cache" /*tmpfs的根在bbshome/cache */
    如果 USE_TMPFS 原来是 0，修改后重新编译安装。同时在 ~bbs/ 下建立 cache 目录，重启动服务。
    可以在 ~bbs/cache/ mount 一个 tmpfs 文件系统提高性能。推荐 USE_TMPFS 定义成 1，否则的话
    两个 telnet 登录之间的未读记录都不会同步。



附1：php编译说明
wForum需要php支持gd及mysql。
首先，确认你的linux系统已安装了mysql、gd、libjpeg、libpng、freetype
及各自相应的devel包

然后用下面的参数编译php（假设 apache 1.3.x）：
./configure  --prefix=/bbs/www --with-freetype-dir=/usr/lib --with-gd --with
-jpeg-dir --with-png-dir --with-config-file-path=/bbs/www/conf --with-zlib
-dir --with-mysql --with-apxs=/bbs/www/bin/apxs

make
make install


附2: 自定义头像的更多细节
自定义头像的存放位置是wForum主目录下面的uploadFace/目录。在备份和转移BBS数据的时候也要
备份这个目录。有人可能会希望BBS的数据全部都在~bbs/目录下面以方便备份，这是可行的。
下面提供一个方法：

a) 在~bbs/目录下建立uploadFace目录
b) 在wForum主目录下面删除uploadFace目录，并且建立一个符号连接：
   ln -s ~bbs/uploadFace uploadFace
c) 确认在httpd.conf中，wForum主目录允许FollowSymLinks，例如如下：

<Directory "/var/www/html/wForum">
    Options FollowSymLinks
</Directory>

具体的细节请参考apache的配置说明。注意：允许FollowSymLinks会有潜在的安全问题。
